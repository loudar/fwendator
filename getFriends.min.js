async function G(){return console.log("⚙️ Intializing..."),(webpackChunkdiscord_app.push([[""],{},(k)=>{y=[];for(let x in k.c)y.push(k.c[x])}]),y).find((k)=>k?.exports?.default?.getToken!==void 0).exports?.default?.getToken()}async function E(k,x){return await fetch(k,{headers:{Authorization:x}}).then((q)=>q.json()).then((q)=>{return q})}async function H(k){return console.log("✉️ Fetching friends..."),Object.values(await E("https://discord.com/api/v9/users/@me/relationships",k)).map((x)=>x.user)}var J=(k)=>new Promise((x)=>setTimeout(x,k));async function K(k,x){[fp,y,s]=[{},Math.floor(k.length%3600/60),Math.floor(k.length%60)],console.log(`⏱ This will take about ${(y>0?y+(y===1?" minute and ":" minutes and "):"")+(s>0?s+(s===1?" second":" seconds"):"")}`);for(let q in k){let z=k[q].id,B=k[q].avatar,C=B?`https://cdn.discordapp.com/avatars/${z}/${B}.webp?size=128`:"";fp[z]={name:`${k[q].username}#${k[q].discriminator}`,avatarUrl:C,mutual:Object.values(await E(`https://discord.com/api/v9/users/${z}/relationships`,x)).map((D)=>D.id)},console.log(`\uD83D\uDCC3 Parsing friends... [${parseInt(q)+1}/${k.length}]`),await J(1000)}try{console.log("\uD83D\uDC64 Fetching self user…");let q=await E("https://discord.com/api/v9/users/@me",x);if(q&&q.id){let z=q.id,B=q.avatar?`https://cdn.discordapp.com/avatars/${z}/${q.avatar}.webp?size=128`:"",C=k.map((D)=>D.id);fp[z]={name:`${q.username}#${q.discriminator}`,avatarUrl:B,mutual:C}}}catch(q){console.warn("⚠️ Could not fetch self user; continuing without explicit origin node.",q)}return fp}function L(k){document.head.innerHTML="",document.body.innerHTML="",document.body.appendChild(Object.assign(document.createElement("h1"),{innerHTML:"Your friends data ✨"})),document.body.appendChild(Object.assign(document.createElement("textarea"),{value:JSON.stringify(k),readOnly:!0,style:"width: 100%; height: 400px;"})),document.body.appendChild(Object.assign(document.createElement("button"),{innerHTML:"\uD83D\uDCC4 Download data",onclick:function(){url=URL.createObjectURL(new Blob([JSON.stringify(k)],{type:"application/json"})),Object.assign(document.createElement("a"),{href:url,download:`friends-${new Date().toISOString().replace(/[:T]/g,"-").slice(0,19).replaceAll("-","")}.json`}).click(),URL.revokeObjectURL(url)}}))}async function y(){if(window.location.host==="discord.com"){var k=await G(),x=await H(k),q=await K(x,k);L(q),console.log("✨ Done")}else alert("Not in discord website !")}y();
